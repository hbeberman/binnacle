From afd5972357599c9547188ed88ba692e967b004ca Mon Sep 17 00:00:00 2001
From: Daniel McIlvaney <damcilva@microsoft.com>
Date: Fri, 23 Jan 2026 22:21:06 -0800
Subject: [PATCH] feat: add short_name support to bug/idea/milestone and Entity
 trait

- Add -s/--short-name flag to bug create, idea create, milestone create
- Add short_name field to Bug, Idea, Milestone structs (Task already had it)
- Update CLI dispatch to pass short_name parameter through
- Update to_human() formatters to display short_name when present
- Add Entity trait to enforce consistent interface across primary entities
- Add test_all_primary_entities_implement_entity_trait compile-time check
- Update CONTRIBUTING.md checklist with Entity trait requirements
---
 CONTRIBUTING.md     |   2 +
 src/cli/mod.rs      |  24 +++++
 src/commands/mod.rs | 179 +++++++++++++++++++++++++++--------
 src/main.rs         |  25 ++++-
 src/mcp/mod.rs      |  13 ++-
 src/models/mod.rs   | 221 ++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 422 insertions(+), 42 deletions(-)

diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md
index 62a8850..3779d74 100644
--- a/CONTRIBUTING.md
+++ b/CONTRIBUTING.md
@@ -146,6 +146,8 @@ When adding a new entity type to binnacle (like Task, Bug, Idea, etc.), you must
    - [ ] Create the struct with `entity_type` field
    - [ ] Implement serialization/deserialization
    - [ ] Add to `EntityType` enum if needed
+   - [ ] If a "primary" entity (work items with id/title/short_name): implement `Entity` trait
+   - [ ] Add to `test_all_primary_entities_implement_entity_trait` test
 
 2. **Update storage schema** (`src/storage/mod.rs`)
    - [ ] Add `CREATE TABLE` in `init_schema()`
diff --git a/src/cli/mod.rs b/src/cli/mod.rs
index 21dc898..fc030bd 100644
--- a/src/cli/mod.rs
+++ b/src/cli/mod.rs
@@ -380,6 +380,10 @@ pub enum BugCommands {
         /// Bug title
         title: String,
 
+        /// Short display name (shown in GUI instead of ID)
+        #[arg(short = 's', long)]
+        short_name: Option<String>,
+
         /// Priority (0-4, lower is higher priority)
         #[arg(short, long)]
         priority: Option<u8>,
@@ -447,6 +451,10 @@ pub enum BugCommands {
         #[arg(long)]
         title: Option<String>,
 
+        /// New short display name for GUI (recommended: 1-2 words, ~12 chars max)
+        #[arg(short = 's', long)]
+        short_name: Option<String>,
+
         /// New description
         #[arg(long)]
         description: Option<String>,
@@ -523,6 +531,10 @@ pub enum IdeaCommands {
         /// Idea title
         title: String,
 
+        /// Short display name (shown in GUI instead of ID)
+        #[arg(short = 's', long)]
+        short_name: Option<String>,
+
         /// Tags for the idea
         #[arg(short, long)]
         tag: Vec<String>,
@@ -558,6 +570,10 @@ pub enum IdeaCommands {
         #[arg(long)]
         title: Option<String>,
 
+        /// New short display name for GUI (recommended: 1-2 words, ~12 chars max)
+        #[arg(short = 's', long)]
+        short_name: Option<String>,
+
         /// New description
         #[arg(long)]
         description: Option<String>,
@@ -600,6 +616,10 @@ pub enum MilestoneCommands {
         /// Milestone title
         title: String,
 
+        /// Short display name (shown in GUI instead of ID)
+        #[arg(short = 's', long)]
+        short_name: Option<String>,
+
         /// Priority (0-4, lower is higher priority)
         #[arg(short, long)]
         priority: Option<u8>,
@@ -651,6 +671,10 @@ pub enum MilestoneCommands {
         #[arg(long)]
         title: Option<String>,
 
+        /// New short display name for GUI (recommended: 1-2 words, ~12 chars max)
+        #[arg(short = 's', long)]
+        short_name: Option<String>,
+
         /// New description
         #[arg(long)]
         description: Option<String>,
diff --git a/src/commands/mod.rs b/src/commands/mod.rs
index 38700a6..0ca8627 100644
--- a/src/commands/mod.rs
+++ b/src/commands/mod.rs
@@ -57,6 +57,50 @@ impl<T: Serialize> CommandOutput<T> {
     }
 }
 
+// === Short Name Helpers ===
+
+/// Maximum length for short_name (2x display limit for GUI).
+const SHORT_NAME_MAX_LEN: usize = 30;
+
+/// Normalize a short_name for storage (truncate if needed).
+/// Used by create functions. Returns None if input is None.
+fn normalize_short_name(short_name: Option<String>) -> Option<String> {
+    short_name.map(|sn| {
+        if sn.chars().count() > SHORT_NAME_MAX_LEN {
+            eprintln!(
+                "Note: short_name truncated from {} to {} chars for GUI display.",
+                sn.chars().count(),
+                SHORT_NAME_MAX_LEN
+            );
+            sn.chars().take(SHORT_NAME_MAX_LEN).collect::<String>()
+        } else {
+            sn
+        }
+    })
+}
+
+/// Process short_name for update operations.
+/// - None: no change
+/// - Some("")/whitespace: clear the field
+/// - Some(value): set/truncate the value
+fn process_short_name_update(short_name: Option<String>) -> Option<Option<String>> {
+    short_name.map(|s| {
+        if s.trim().is_empty() {
+            // Empty or whitespace-only clears the short_name
+            None
+        } else if s.chars().count() > SHORT_NAME_MAX_LEN {
+            eprintln!(
+                "Note: short_name truncated from {} to {} chars for GUI display.",
+                s.chars().count(),
+                SHORT_NAME_MAX_LEN
+            );
+            Some(s.chars().take(SHORT_NAME_MAX_LEN).collect::<String>())
+        } else {
+            Some(s)
+        }
+    })
+}
+
 // === Init Command ===
 
 /// Prompt the user for a yes/no answer.
@@ -390,19 +434,19 @@ Links connect entities in the task graph to model dependencies, relationships, a
 
 ### Bug Tracking
 
-- `bn bug create "Title" --severity medium` - Create a bug (severities: triage, low, medium, high, critical)
+- `bn bug create "Title" -s "short" --severity medium` - Create a bug (severities: triage, low, medium, high, critical)
 - `bn bug list` - List all bugs
 - `bn bug close <id> --reason "fixed"` - Close a bug
 
 ### Idea Management
 
-- `bn idea create "Title"` - Create a low-stakes idea seed
+- `bn idea create "Title" -s "short"` - Create a low-stakes idea seed
 - `bn idea list` - List all ideas
 - `bn idea update <id> --status promoted` - Promote idea to task
 
 ### Milestones
 
-- `bn milestone create "v1.0" --due 2025-02-01` - Create milestone with due date
+- `bn milestone create "v1.0" -s "v1.0" --due 2025-02-01` - Create milestone with due date
 - `bn milestone list` - List milestones
 - `bn milestone show <id>` - Show milestone with linked tasks
 
@@ -505,7 +549,7 @@ bn goodbye "completed task bn-a1b2"
 
 ## Notes
 
-- Binnacle stores data in `.bn/` directory using git's orphan branch backend
+- Binnacle stores data on a git orphan branch (no working directory clutter)
 - All changes are tracked in an append-only log
 - Use `bn compact` to summarize old closed tasks
 - Run `bn --help` for full command reference
@@ -1824,18 +1868,7 @@ pub fn task_create_with_queue(
         return Err(Error::Other("Priority must be 0-4".to_string()));
     }
 
-    // Auto-truncate very long short_name (2x display limit = 30 chars)
-    let short_name = short_name.map(|sn| {
-        if sn.chars().count() > 30 {
-            eprintln!(
-                "Note: short_name truncated from {} to 30 chars for GUI display.",
-                sn.chars().count()
-            );
-            sn.chars().take(30).collect::<String>()
-        } else {
-            sn
-        }
-    });
+    let short_name = normalize_short_name(short_name);
 
     let id = generate_id("bn", &title);
     let mut task = Task::new(id.clone(), title.clone());
@@ -2571,23 +2604,8 @@ pub fn task_update(
         updated_fields.push("title".to_string());
     }
 
-    if let Some(s) = short_name {
-        // Empty or whitespace-only clears the short_name
-        if s.trim().is_empty() {
-            task.short_name = None;
-        } else {
-            // Auto-truncate very long short_name (2x display limit = 30 chars)
-            let truncated = if s.chars().count() > 30 {
-                eprintln!(
-                    "Note: short_name truncated from {} to 30 chars for GUI display.",
-                    s.chars().count()
-                );
-                s.chars().take(30).collect::<String>()
-            } else {
-                s
-            };
-            task.short_name = Some(truncated);
-        }
+    if let Some(new_short_name) = process_short_name_update(short_name) {
+        task.short_name = new_short_name;
         updated_fields.push("short_name".to_string());
     }
 
@@ -3067,6 +3085,7 @@ impl Output for BugCreated {
 pub fn bug_create(
     repo_path: &Path,
     title: String,
+    short_name: Option<String>,
     description: Option<String>,
     priority: Option<u8>,
     severity: Option<String>,
@@ -3078,6 +3097,7 @@ pub fn bug_create(
     bug_create_with_queue(
         repo_path,
         title,
+        short_name,
         description,
         priority,
         severity,
@@ -3094,6 +3114,7 @@ pub fn bug_create(
 pub fn bug_create_with_queue(
     repo_path: &Path,
     title: String,
+    short_name: Option<String>,
     description: Option<String>,
     priority: Option<u8>,
     severity: Option<String>,
@@ -3113,6 +3134,7 @@ pub fn bug_create_with_queue(
 
     let id = generate_id("bn", &title);
     let mut bug = Bug::new(id.clone(), title.clone());
+    bug.short_name = normalize_short_name(short_name);
     bug.description = description;
     bug.priority = priority.unwrap_or(2);
     bug.severity = severity
@@ -3149,6 +3171,9 @@ impl Output for Bug {
     fn to_human(&self) -> String {
         let mut lines = Vec::new();
         lines.push(format!("{} {}", self.id, self.title));
+        if let Some(ref short_name) = self.short_name {
+            lines.push(format!("  Short Name: {}", short_name));
+        }
         lines.push(format!(
             "  Status: {:?}  Priority: {}  Severity: {:?}",
             self.status, self.priority, self.severity
@@ -3272,6 +3297,9 @@ impl Output for BugShowResult {
         let mut lines = Vec::new();
         lines.push(format!("Bug: {}", self.bug.id));
         lines.push(format!("Title: {}", self.bug.title));
+        if let Some(ref short_name) = self.bug.short_name {
+            lines.push(format!("Short Name: {}", short_name));
+        }
         lines.push(format!("Status: {:?}", self.bug.status));
         lines.push(format!("Priority: P{}", self.bug.priority));
         lines.push(format!("Severity: {:?}", self.bug.severity));
@@ -3667,6 +3695,7 @@ pub fn bug_update(
     repo_path: &Path,
     id: &str,
     title: Option<String>,
+    short_name: Option<String>,
     description: Option<String>,
     priority: Option<u8>,
     status: Option<&str>,
@@ -3687,6 +3716,11 @@ pub fn bug_update(
         updated_fields.push("title".to_string());
     }
 
+    if let Some(new_short_name) = process_short_name_update(short_name) {
+        bug.short_name = new_short_name;
+        updated_fields.push("short_name".to_string());
+    }
+
     if let Some(d) = description {
         bug.description = Some(d);
         updated_fields.push("description".to_string());
@@ -4003,6 +4037,7 @@ impl Output for IdeaCreated {
 pub fn idea_create(
     repo_path: &Path,
     title: String,
+    short_name: Option<String>,
     description: Option<String>,
     tags: Vec<String>,
 ) -> Result<IdeaCreated> {
@@ -4010,6 +4045,7 @@ pub fn idea_create(
 
     let id = generate_id("bn", &title);
     let mut idea = Idea::new(id.clone(), title.clone());
+    idea.short_name = normalize_short_name(short_name);
     idea.description = description;
     idea.tags = tags;
 
@@ -4032,6 +4068,9 @@ impl Output for Idea {
             IdeaStatus::Discarded => "discarded",
         };
         lines.push(format!("{} [{}] {}", self.id, status_str, self.title));
+        if let Some(ref short_name) = self.short_name {
+            lines.push(format!("  Short Name: {}", short_name));
+        }
         if let Some(ref desc) = self.description {
             lines.push(format!("  Description: {}", desc));
         }
@@ -4133,10 +4172,12 @@ impl Output for IdeaUpdated {
 }
 
 /// Update an idea.
+#[allow(clippy::too_many_arguments)]
 pub fn idea_update(
     repo_path: &Path,
     id: &str,
     title: Option<String>,
+    short_name: Option<String>,
     description: Option<String>,
     status: Option<&str>,
     add_tags: Vec<String>,
@@ -4151,6 +4192,11 @@ pub fn idea_update(
         updated_fields.push("title".to_string());
     }
 
+    if let Some(new_short_name) = process_short_name_update(short_name) {
+        idea.short_name = new_short_name;
+        updated_fields.push("short_name".to_string());
+    }
+
     if let Some(d) = description {
         idea.description = Some(d);
         updated_fields.push("description".to_string());
@@ -4278,9 +4324,11 @@ impl Output for MilestoneCreated {
 }
 
 /// Create a new milestone.
+#[allow(clippy::too_many_arguments)]
 pub fn milestone_create(
     repo_path: &Path,
     title: String,
+    short_name: Option<String>,
     description: Option<String>,
     priority: Option<u8>,
     tags: Vec<String>,
@@ -4297,6 +4345,7 @@ pub fn milestone_create(
 
     let id = generate_id("bn", &title);
     let mut milestone = Milestone::new(id.clone(), title.clone());
+    milestone.short_name = normalize_short_name(short_name);
     milestone.description = description;
     milestone.priority = priority.unwrap_or(2);
     milestone.tags = tags;
@@ -4325,6 +4374,9 @@ impl Output for Milestone {
     fn to_human(&self) -> String {
         let mut lines = Vec::new();
         lines.push(format!("{} {}", self.id, self.title));
+        if let Some(ref short_name) = self.short_name {
+            lines.push(format!("  Short Name: {}", short_name));
+        }
         lines.push(format!(
             "  Status: {:?}  Priority: {}",
             self.status, self.priority
@@ -4502,6 +4554,7 @@ pub fn milestone_update(
     repo_path: &Path,
     id: &str,
     title: Option<String>,
+    short_name: Option<String>,
     description: Option<String>,
     priority: Option<u8>,
     status: Option<&str>,
@@ -4519,6 +4572,11 @@ pub fn milestone_update(
         updated_fields.push("title".to_string());
     }
 
+    if let Some(new_short_name) = process_short_name_update(short_name) {
+        milestone.short_name = new_short_name;
+        updated_fields.push("short_name".to_string());
+    }
+
     if let Some(d) = description {
         milestone.description = Some(d);
         updated_fields.push("description".to_string());
@@ -12141,6 +12199,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -12153,6 +12212,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -12176,6 +12236,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -12189,6 +12250,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -13036,6 +13098,7 @@ mod tests {
             "Low bug".to_string(),
             None,
             None,
+            None,
             Some("low".to_string()),
             vec![],
             None,
@@ -13049,6 +13112,7 @@ mod tests {
             "Critical bug".to_string(),
             None,
             None,
+            None,
             Some("critical".to_string()),
             vec![],
             None,
@@ -13062,6 +13126,7 @@ mod tests {
             "Closed bug".to_string(),
             None,
             None,
+            None,
             Some("high".to_string()),
             vec![],
             None,
@@ -13948,6 +14013,7 @@ mod tests {
         let result = bug_create(
             temp.path(),
             "Test bug".to_string(),
+            None,
             Some("Description".to_string()),
             Some(1),
             Some("high".to_string()),
@@ -13970,6 +14036,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -13991,6 +14058,7 @@ mod tests {
             temp.path(),
             "Bad priority".to_string(),
             None,
+            None,
             Some(5), // invalid: must be 0-4
             None,
             vec![],
@@ -14013,6 +14081,7 @@ mod tests {
         let created = bug_create(
             temp.path(),
             "Test bug".to_string(),
+            None,
             Some("Bug description".to_string()),
             Some(1),
             Some("critical".to_string()),
@@ -14046,6 +14115,7 @@ mod tests {
             temp.path(),
             "Bug 1".to_string(),
             None,
+            None,
             Some(1),
             Some("high".to_string()),
             vec![],
@@ -14058,6 +14128,7 @@ mod tests {
             temp.path(),
             "Bug 2".to_string(),
             None,
+            None,
             Some(2),
             Some("low".to_string()),
             vec![],
@@ -14080,6 +14151,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14092,6 +14164,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14116,6 +14189,7 @@ mod tests {
             temp.path(),
             "High priority".to_string(),
             None,
+            None,
             Some(0),
             None,
             vec![],
@@ -14128,6 +14202,7 @@ mod tests {
             temp.path(),
             "Low priority".to_string(),
             None,
+            None,
             Some(3),
             None,
             vec![],
@@ -14150,6 +14225,7 @@ mod tests {
             "Critical bug".to_string(),
             None,
             None,
+            None,
             Some("critical".to_string()),
             vec![],
             None,
@@ -14162,6 +14238,7 @@ mod tests {
             "Low severity".to_string(),
             None,
             None,
+            None,
             Some("low".to_string()),
             vec![],
             None,
@@ -14184,6 +14261,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec!["ui".to_string()],
             None,
             None,
@@ -14196,6 +14274,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec!["api".to_string()],
             None,
             None,
@@ -14217,6 +14296,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14228,6 +14308,7 @@ mod tests {
             temp.path(),
             &created.id,
             Some("Updated bug".to_string()),
+            None, // short_name
             Some("New description".to_string()),
             Some(1),
             None,
@@ -14276,6 +14357,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14287,6 +14369,7 @@ mod tests {
             temp.path(),
             &created.id,
             None,
+            None, // short_name
             None,
             None,
             Some("in_progress"),
@@ -14313,6 +14396,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec!["old-tag".to_string()],
             None,
             None,
@@ -14324,6 +14408,7 @@ mod tests {
             temp.path(),
             &created.id,
             None,
+            None, // short_name
             None,
             None,
             None,
@@ -14351,6 +14436,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14362,6 +14448,7 @@ mod tests {
             temp.path(),
             &created.id,
             None,
+            None, // short_name
             None,
             None,
             None,
@@ -14391,6 +14478,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14402,6 +14490,7 @@ mod tests {
             temp.path(),
             &created.id,
             None,
+            None, // short_name
             None,
             Some(5), // invalid
             None,
@@ -14447,6 +14536,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14459,6 +14549,7 @@ mod tests {
             temp.path(),
             &bug.id,
             None,
+            None, // short_name
             None,
             None,
             Some("in_progress"),
@@ -14490,6 +14581,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14525,6 +14617,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14552,6 +14645,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
@@ -14580,13 +14674,14 @@ mod tests {
             let result = bug_create(
                 temp.path(),
                 format!("Bug with {} severity", severity_str),
-                None,
-                None,
-                Some(severity_str.to_string()),
-                vec![],
-                None,
-                None,
-                None,
+                None,                           // short_name
+                None,                           // description
+                None,                           // priority
+                Some(severity_str.to_string()), // severity
+                vec![],                         // tags
+                None,                           // assignee
+                None,                           // reproduction_steps
+                None,                           // affected_component
             )
             .unwrap();
 
@@ -14601,6 +14696,7 @@ mod tests {
         let created = bug_create(
             temp.path(),
             "Test bug".to_string(),
+            None,
             Some("Description".to_string()),
             Some(1),
             Some("high".to_string()),
@@ -14632,6 +14728,7 @@ mod tests {
             temp.path(),
             "Bug 1".to_string(),
             None,
+            None,
             Some(0),
             Some("critical".to_string()),
             vec!["urgent".to_string()],
@@ -15249,6 +15346,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec!["test".to_string()],
             None,
             None,
@@ -15317,6 +15415,7 @@ mod tests {
             None,
             None,
             None,
+            None,
             vec![],
             None,
             None,
diff --git a/src/main.rs b/src/main.rs
index d6e3d80..9bf88ca 100644
--- a/src/main.rs
+++ b/src/main.rs
@@ -241,6 +241,7 @@ fn run_command(
         Some(Commands::Bug { command }) => match command {
             BugCommands::Create {
                 title,
+                short_name,
                 priority,
                 severity,
                 tag,
@@ -253,6 +254,7 @@ fn run_command(
                 let result = commands::bug_create_with_queue(
                     repo_path,
                     title,
+                    short_name,
                     description,
                     priority,
                     severity,
@@ -286,6 +288,7 @@ fn run_command(
             BugCommands::Update {
                 id,
                 title,
+                short_name,
                 description,
                 priority,
                 status,
@@ -301,6 +304,7 @@ fn run_command(
                     repo_path,
                     &id,
                     title,
+                    short_name,
                     description,
                     priority,
                     status.as_deref(),
@@ -331,10 +335,11 @@ fn run_command(
         Some(Commands::Idea { command }) => match command {
             IdeaCommands::Create {
                 title,
+                short_name,
                 tag,
                 description,
             } => {
-                let result = commands::idea_create(repo_path, title, description, tag)?;
+                let result = commands::idea_create(repo_path, title, short_name, description, tag)?;
                 output(&result, human);
             }
             IdeaCommands::List { status, tag } => {
@@ -348,6 +353,7 @@ fn run_command(
             IdeaCommands::Update {
                 id,
                 title,
+                short_name,
                 description,
                 status,
                 add_tag,
@@ -357,6 +363,7 @@ fn run_command(
                     repo_path,
                     &id,
                     title,
+                    short_name,
                     description,
                     status.as_deref(),
                     add_tag,
@@ -377,6 +384,7 @@ fn run_command(
         Some(Commands::Milestone { command }) => match command {
             MilestoneCommands::Create {
                 title,
+                short_name,
                 priority,
                 tag,
                 assignee,
@@ -386,6 +394,7 @@ fn run_command(
                 let result = commands::milestone_create(
                     repo_path,
                     title,
+                    short_name,
                     description,
                     priority,
                     tag,
@@ -414,6 +423,7 @@ fn run_command(
             MilestoneCommands::Update {
                 id,
                 title,
+                short_name,
                 description,
                 priority,
                 status,
@@ -426,6 +436,7 @@ fn run_command(
                     repo_path,
                     &id,
                     title,
+                    short_name,
                     description,
                     priority,
                     status.as_deref(),
@@ -1307,6 +1318,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
         Some(Commands::Bug { command }) => match command {
             BugCommands::Create {
                 title,
+                short_name,
                 priority,
                 severity,
                 tag,
@@ -1319,6 +1331,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
                 "bug create".to_string(),
                 serde_json::json!({
                     "title": title,
+                    "short_name": short_name,
                     "priority": priority,
                     "severity": severity,
                     "tag": tag,
@@ -1347,6 +1360,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
             BugCommands::Update {
                 id,
                 title,
+                short_name,
                 description,
                 priority,
                 status,
@@ -1362,6 +1376,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
                 serde_json::json!({
                     "id": id,
                     "title": title,
+                    "short_name": short_name,
                     "description": description,
                     "priority": priority,
                     "status": status,
@@ -1393,12 +1408,14 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
         Some(Commands::Idea { command }) => match command {
             IdeaCommands::Create {
                 title,
+                short_name,
                 tag,
                 description,
             } => (
                 "idea create".to_string(),
                 serde_json::json!({
                     "title": title,
+                    "short_name": short_name,
                     "tag": tag,
                     "description": description,
                 }),
@@ -1414,6 +1431,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
             IdeaCommands::Update {
                 id,
                 title,
+                short_name,
                 description,
                 status,
                 add_tag,
@@ -1423,6 +1441,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
                 serde_json::json!({
                     "id": id,
                     "title": title,
+                    "short_name": short_name,
                     "description": description,
                     "status": status,
                     "add_tag": add_tag,
@@ -1444,6 +1463,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
         Some(Commands::Milestone { command }) => match command {
             MilestoneCommands::Create {
                 title,
+                short_name,
                 priority,
                 tag,
                 assignee,
@@ -1453,6 +1473,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
                 "milestone create".to_string(),
                 serde_json::json!({
                     "title": title,
+                    "short_name": short_name,
                     "priority": priority,
                     "tag": tag,
                     "assignee": assignee,
@@ -1479,6 +1500,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
             MilestoneCommands::Update {
                 id,
                 title,
+                short_name,
                 description,
                 priority,
                 status,
@@ -1491,6 +1513,7 @@ fn serialize_command(command: &Option<Commands>) -> (String, serde_json::Value)
                 serde_json::json!({
                     "id": id,
                     "title": title,
+                    "short_name": short_name,
                     "description": description,
                     "priority": priority,
                     "status": status,
diff --git a/src/mcp/mod.rs b/src/mcp/mod.rs
index 51da49d..9c76e99 100644
--- a/src/mcp/mod.rs
+++ b/src/mcp/mod.rs
@@ -570,9 +570,11 @@ impl McpServer {
                     .unwrap_or_default();
                 let assignee = get_optional_string(args, "assignee");
                 let due_date = get_optional_string(args, "due_date");
+                let short_name = get_optional_string(args, "short_name");
                 let result = commands::milestone_create(
                     repo,
                     title,
+                    short_name,
                     description,
                     priority,
                     tags,
@@ -626,10 +628,12 @@ impl McpServer {
                     .unwrap_or_default();
                 let assignee = get_optional_string(args, "assignee");
                 let due_date = get_optional_string(args, "due_date");
+                let short_name = get_optional_string(args, "short_name");
                 let result = commands::milestone_update(
                     repo,
                     &id,
                     title,
+                    short_name,
                     description,
                     priority,
                     status.as_deref(),
@@ -703,9 +707,10 @@ impl McpServer {
             // Idea tools
             "bn_idea_create" => {
                 let title = get_string_arg(args, "title")?;
+                let short_name = get_optional_string(args, "short_name");
                 let description = get_optional_string(args, "description");
                 let tags = get_string_array(args, "tags");
-                let result = commands::idea_create(repo, title, description, tags)?;
+                let result = commands::idea_create(repo, title, short_name, description, tags)?;
                 Ok(result.to_json())
             }
             "bn_idea_list" => {
@@ -722,6 +727,7 @@ impl McpServer {
             "bn_idea_update" => {
                 let id = get_string_arg(args, "id")?;
                 let title = get_optional_string(args, "title");
+                let short_name = get_optional_string(args, "short_name");
                 let description = get_optional_string(args, "description");
                 let status = get_optional_string(args, "status");
                 let add_tags = get_string_array(args, "add_tags");
@@ -730,6 +736,7 @@ impl McpServer {
                     repo,
                     &id,
                     title,
+                    short_name,
                     description,
                     status.as_deref(),
                     add_tags,
@@ -757,6 +764,7 @@ impl McpServer {
             // Bug tools
             "bn_bug_create" => {
                 let title = get_string_arg(args, "title")?;
+                let short_name = get_optional_string(args, "short_name");
                 let description = get_optional_string(args, "description");
                 let priority = get_optional_u8(args, "priority");
                 let severity = get_optional_string(args, "severity");
@@ -768,6 +776,7 @@ impl McpServer {
                 let result = commands::bug_create_with_queue(
                     repo,
                     title,
+                    short_name,
                     description,
                     priority,
                     severity,
@@ -802,6 +811,7 @@ impl McpServer {
                 let id = get_string_arg(args, "id")?;
                 let title = get_optional_string(args, "title");
                 let description = get_optional_string(args, "description");
+                let short_name = get_optional_string(args, "short_name");
                 let priority = get_optional_u8(args, "priority");
                 let status = get_optional_string(args, "status");
                 let severity = get_optional_string(args, "severity");
@@ -815,6 +825,7 @@ impl McpServer {
                     repo,
                     &id,
                     title,
+                    short_name,
                     description,
                     priority,
                     status.as_deref(),
diff --git a/src/models/mod.rs b/src/models/mod.rs
index e6dff50..c643511 100644
--- a/src/models/mod.rs
+++ b/src/models/mod.rs
@@ -8,6 +8,13 @@
 //! - `CommitLink` - Associations between commits and tasks
 //! - `Edge` - Relationships between entities (dependencies, blocks, related, etc.)
 //! - `Agent` - AI agent registration for lifecycle management
+//!
+//! # Entity Trait
+//!
+//! All primary entities (Task, Bug, Idea, Milestone) implement the [`Entity`] trait,
+//! which ensures a consistent interface for common fields like `id`, `title`, and
+//! `short_name`. This prevents inconsistencies where some entity types accidentally
+//! lack features that others have.
 
 pub mod graph;
 
@@ -16,6 +23,46 @@ use serde::{Deserialize, Serialize};
 use sha2::{Digest, Sha256};
 use std::fmt;
 
+/// Core trait that all primary entities must implement.
+///
+/// This trait ensures consistency across entity types (Task, Bug, Idea, Milestone).
+/// If a new field like `short_name` is added to one entity, the compiler will
+/// require it on all entities that implement this trait.
+///
+/// # Example
+/// ```ignore
+/// let task: &dyn Entity = &my_task;
+/// println!("ID: {}, Title: {}", task.id(), task.title());
+/// if let Some(name) = task.short_name() {
+///     println!("Short name: {}", name);
+/// }
+/// ```
+pub trait Entity {
+    /// Returns the unique identifier (e.g., "bn-a1b2").
+    fn id(&self) -> &str;
+
+    /// Returns the entity type string (e.g., "task", "bug", "idea", "milestone").
+    fn entity_type(&self) -> &str;
+
+    /// Returns the entity's title.
+    fn title(&self) -> &str;
+
+    /// Returns the optional short display name.
+    fn short_name(&self) -> Option<&str>;
+
+    /// Returns the optional description.
+    fn description(&self) -> Option<&str>;
+
+    /// Returns the creation timestamp.
+    fn created_at(&self) -> DateTime<Utc>;
+
+    /// Returns the last update timestamp.
+    fn updated_at(&self) -> DateTime<Utc>;
+
+    /// Returns the tags for this entity.
+    fn tags(&self) -> &[String];
+}
+
 /// Task status in the workflow.
 #[derive(Debug, Clone, Default, PartialEq, Eq, Serialize, Deserialize)]
 #[serde(rename_all = "snake_case")]
@@ -150,6 +197,33 @@ impl Task {
     }
 }
 
+impl Entity for Task {
+    fn id(&self) -> &str {
+        &self.id
+    }
+    fn entity_type(&self) -> &str {
+        &self.entity_type
+    }
+    fn title(&self) -> &str {
+        &self.title
+    }
+    fn short_name(&self) -> Option<&str> {
+        self.short_name.as_deref()
+    }
+    fn description(&self) -> Option<&str> {
+        self.description.as_deref()
+    }
+    fn created_at(&self) -> DateTime<Utc> {
+        self.created_at
+    }
+    fn updated_at(&self) -> DateTime<Utc> {
+        self.updated_at
+    }
+    fn tags(&self) -> &[String] {
+        &self.tags
+    }
+}
+
 /// A defect tracked by Binnacle.
 #[derive(Debug, Clone, Serialize, Deserialize)]
 pub struct Bug {
@@ -163,6 +237,10 @@ pub struct Bug {
     /// Bug title
     pub title: String,
 
+    /// Optional short display name (shown in GUI instead of ID)
+    #[serde(skip_serializing_if = "Option::is_none")]
+    pub short_name: Option<String>,
+
     /// Detailed description
     #[serde(skip_serializing_if = "Option::is_none")]
     pub description: Option<String>,
@@ -222,6 +300,7 @@ impl Bug {
             id,
             entity_type: "bug".to_string(),
             title,
+            short_name: None,
             description: None,
             priority: 2,
             status: TaskStatus::default(),
@@ -239,6 +318,33 @@ impl Bug {
     }
 }
 
+impl Entity for Bug {
+    fn id(&self) -> &str {
+        &self.id
+    }
+    fn entity_type(&self) -> &str {
+        &self.entity_type
+    }
+    fn title(&self) -> &str {
+        &self.title
+    }
+    fn short_name(&self) -> Option<&str> {
+        self.short_name.as_deref()
+    }
+    fn description(&self) -> Option<&str> {
+        self.description.as_deref()
+    }
+    fn created_at(&self) -> DateTime<Utc> {
+        self.created_at
+    }
+    fn updated_at(&self) -> DateTime<Utc> {
+        self.updated_at
+    }
+    fn tags(&self) -> &[String] {
+        &self.tags
+    }
+}
+
 /// A low-stakes idea or rough concept tracked by Binnacle.
 /// Ideas are distinct from tasks - they represent early-stage notions
 /// that can be captured quickly and potentially grown into full PRDs or tasks.
@@ -254,6 +360,10 @@ pub struct Idea {
     /// Idea title
     pub title: String,
 
+    /// Optional short display name (shown in GUI instead of ID)
+    #[serde(skip_serializing_if = "Option::is_none")]
+    pub short_name: Option<String>,
+
     /// Detailed description
     #[serde(skip_serializing_if = "Option::is_none")]
     pub description: Option<String>,
@@ -285,6 +395,7 @@ impl Idea {
             id,
             entity_type: "idea".to_string(),
             title,
+            short_name: None,
             description: None,
             tags: Vec::new(),
             status: IdeaStatus::default(),
@@ -295,6 +406,33 @@ impl Idea {
     }
 }
 
+impl Entity for Idea {
+    fn id(&self) -> &str {
+        &self.id
+    }
+    fn entity_type(&self) -> &str {
+        &self.entity_type
+    }
+    fn title(&self) -> &str {
+        &self.title
+    }
+    fn short_name(&self) -> Option<&str> {
+        self.short_name.as_deref()
+    }
+    fn description(&self) -> Option<&str> {
+        self.description.as_deref()
+    }
+    fn created_at(&self) -> DateTime<Utc> {
+        self.created_at
+    }
+    fn updated_at(&self) -> DateTime<Utc> {
+        self.updated_at
+    }
+    fn tags(&self) -> &[String] {
+        &self.tags
+    }
+}
+
 /// A milestone for grouping and tracking progress of tasks and bugs.
 #[derive(Debug, Clone, Serialize, Deserialize)]
 pub struct Milestone {
@@ -308,6 +446,10 @@ pub struct Milestone {
     /// Milestone title
     pub title: String,
 
+    /// Optional short display name (shown in GUI instead of ID)
+    #[serde(skip_serializing_if = "Option::is_none")]
+    pub short_name: Option<String>,
+
     /// Detailed description
     #[serde(skip_serializing_if = "Option::is_none")]
     pub description: Option<String>,
@@ -355,6 +497,7 @@ impl Milestone {
             id,
             entity_type: "milestone".to_string(),
             title,
+            short_name: None,
             description: None,
             priority: 2,
             status: TaskStatus::default(),
@@ -369,6 +512,33 @@ impl Milestone {
     }
 }
 
+impl Entity for Milestone {
+    fn id(&self) -> &str {
+        &self.id
+    }
+    fn entity_type(&self) -> &str {
+        &self.entity_type
+    }
+    fn title(&self) -> &str {
+        &self.title
+    }
+    fn short_name(&self) -> Option<&str> {
+        self.short_name.as_deref()
+    }
+    fn description(&self) -> Option<&str> {
+        self.description.as_deref()
+    }
+    fn created_at(&self) -> DateTime<Utc> {
+        self.created_at
+    }
+    fn updated_at(&self) -> DateTime<Utc> {
+        self.updated_at
+    }
+    fn tags(&self) -> &[String] {
+        &self.tags
+    }
+}
+
 /// Progress statistics for a milestone.
 #[derive(Debug, Clone, Serialize, Deserialize)]
 pub struct MilestoneProgress {
@@ -1336,4 +1506,55 @@ mod tests {
         assert!(json.contains("\"orient_called\":true"));
         assert!(json.contains("\"started_at\""));
     }
+
+    /// Compile-time verification that all primary entity types implement the Entity trait.
+    ///
+    /// This test ensures consistency across work item types. If you add a new entity type
+    /// that should have `id`, `title`, `short_name`, etc., add it here. The compiler will
+    /// fail if the Entity trait isn't implemented for it.
+    ///
+    /// Primary entities (must implement Entity):
+    /// - Task: Work items with status and dependencies
+    /// - Bug: Defects with severity tracking
+    /// - Idea: Low-stakes concepts that can be promoted
+    /// - Milestone: Groupings of tasks/bugs with progress tracking
+    ///
+    /// Secondary entities (do NOT implement Entity - different structure):
+    /// - TestNode: Has `name` not `title`, no short_name
+    /// - Agent: Has `name`/`purpose`, different lifecycle
+    /// - Edge, CommitLink, Queue: Relationship/structural types
+    #[test]
+    fn test_all_primary_entities_implement_entity_trait() {
+        // This function exercises the Entity trait on all primary entity types.
+        // If any type doesn't implement Entity, this won't compile.
+        fn assert_entity_impl<T: Entity>(entity: &T) {
+            let _ = entity.id();
+            let _ = entity.entity_type();
+            let _ = entity.title();
+            let _ = entity.short_name();
+            let _ = entity.description();
+            let _ = entity.created_at();
+            let _ = entity.updated_at();
+            let _ = entity.tags();
+        }
+
+        // Verify Task implements Entity
+        let task = Task::new("bn-test".to_string(), "Test Task".to_string());
+        assert_entity_impl(&task);
+
+        // Verify Bug implements Entity
+        let bug = Bug::new("bn-test".to_string(), "Test Bug".to_string());
+        assert_entity_impl(&bug);
+
+        // Verify Idea implements Entity
+        let idea = Idea::new("bn-test".to_string(), "Test Idea".to_string());
+        assert_entity_impl(&idea);
+
+        // Verify Milestone implements Entity
+        let milestone = Milestone::new("bn-test".to_string(), "Test Milestone".to_string());
+        assert_entity_impl(&milestone);
+
+        // NOTE: If you add a new primary entity type, add it here!
+        // The compiler will tell you if Entity isn't implemented.
+    }
 }
-- 
2.45.4

